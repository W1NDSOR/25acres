<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      #virtualKeyboard button {
          width: 60px;
          height: 60px;
          font-size: 24px;
          margin: 5px;
      }
      section {
        margin: 20px;
      }
    </style>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Payment Gateway</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body data-bs-theme="dark">
    {% load static %}
    <nav class="navbar navbar-expand-lg">
      <h2 style="color: white; margin-left: 50px; margin-top: 20px">
        ShavePay
      </h2>
    </nav>
    <section>
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5
                  class="card-title"
                  style="
                    margin-bottom: 20px;
                    margin-top: 20px;
                    text-align: center;
                    font-size: 30px;
                  "
                >
                  Transaction Details
                </h5>
                <div class="details" style="margin-left: 20px">
                  <div class="row">
                    <div class="col-md-6">
                      <p>Contract ID:</p>
                    </div>
                    <div class="col-md-6">
                      <p>{{ contract.id }}</p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <p>Property ID:</p>
                    </div>
                    <div class="col-md-6">
                      <p>{{ contract.property_id }}</p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <p>Buyer ID:</p>
                    </div>
                    <div class="col-md-6">
                      <p>{{ contract.buyerContract_id }}</p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <p>Seller ID:</p>
                    </div>
                    <div class="col-md-6">
                      <p>{{ contract.sellerContract_id }}</p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <p>Amount:</p>
                    </div>
                    <div class="col-md-6">
                      <p>{{ property.currentBid }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5
                  class="card-title"
                  style="
                    margin-bottom: 20px;
                    margin-top: 20px;
                    text-align: center;
                    font-size: 30px;
                  "
                >
                  Card Details
                </h5>
                <!-- Card information form (e.g., card number, expiration date, CVV) -->
                <div class="details" style="margin-left: 20px">
                  <form method="POST" action="{% url 'pay' %}">
                    {% csrf_token %}
                    <input type="hidden" name="contract_id" value="{{ contract.id }}">                  
                    <div class="row">
                      <div class="col-md-6">
                        <p>Card Number:</p>
                      </div>
                        <div class="col-md-6">
                            <input
                            type="text"
                            name="cardNumber"
                            placeholder="Enter card number"
                            value="{{ cardNumber }}"
                            required
                            />
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <p>Expiration Date:</p>
                      </div>
                        <div class="col-md-6">
                            <input
                            type="text"
                            name="expirationDate"
                            placeholder="Enter expiration date"
                            value="{{ expirationDate }}"
                            required
                            />
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <p>CVV:</p>
                      </div>
                        <div class="col-md-6">
                            <input
                            type="text"
                            name="cvv"
                            placeholder="Enter CVV"
                            value="{{ cvv }}"
                            required
                            />
                        </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <p>Card Holder Name:</p>
                      </div>
                        <div class="col-md-6">
                            <input
                            type="text"
                            name="cardHolderName"
                            placeholder="Enter card holder name"
                            value="{{ cardHolderName }}"
                            required
                            />
                        </div>
                        <div class="otp-verification-section">
                          <div class="otp-verification-section">
                            <h3>OTP Verification</h3>
                            <div class="mb-3">
                              <input type="text" class="form-control" id="code" name="otp" placeholder="Enter OTP" readonly />
                            </div>
                              <div id="virtualKeyboard" style="display: none;">
                                <button type="button" data-value="1">1</button>
                                <button type="button" data-value="2">2</button>
                                <button type="button" data-value="3">3</button>
                                <button type="button" data-value="4">4</button>
                                <button type="button" data-value="5">5</button>
                                <button type="button" data-value="6">6</button>
                                <button type="button" data-value="7">7</button>
                                <button type="button" data-value="8">8</button>
                                <button type="button" data-value="9">9</button>
                                <button type="button" data-value="0">0</button>
                                <button type="button" id="backspace">‚Üê</button><br>
                          </div>
                          <!-- <button class="btn btn-primary" type="submit" style="margin-top: 20px;">Pay</button>
                           -->
                      </div>
                      
                    </div> 
                    <center>
                      <button
                        type="submit"
                        class="btn btn-primary"
                        style="margin-top: 20px; margin-bottom: 20px"
                        name="action"
                        value="Pay"
                      >
                        Pay
                      </button>
                    </center>
                  </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Payment button -->
    <!-- <form method="POST" action="{% url 'pay' %}">
    {% csrf_token %}
    <input type="hidden" name="contract_id" value="{{ contract.id }}">
    <center>
      <button
        type="submit"
        class="btn btn-primary"
        style="margin-top: 20px; margin-bottom: 20px"
        name="action"
        value = "Pay"
      >
        Pay
      </button>
    </center>
    </form> -->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script>
      const codeInput = document.getElementById('code');
      const virtualKeyboard = document.getElementById('virtualKeyboard');

      codeInput.addEventListener('focus', () => {
          virtualKeyboard.style.display = 'block';
      });

      virtualKeyboard.addEventListener('click', (e) => {
          if (e.target.tagName === 'BUTTON') {
              if (e.target.id === 'backspace') {
                  codeInput.value = codeInput.value.slice(0, -1);
              } else {
                  codeInput.value += e.target.getAttribute('data-value');
              }
          }
      });
  </script>
    
  </body>
</html>
